<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precision Entry Indicator | EntryExitPro</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font and dark body styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark background for professional feel */
            color: #E5E7EB; /* Light text for contrast */
        }
        /* Custom scrollbar for the code block */
        #tos-code::-webkit-scrollbar {
            width: 8px;
        }
        #tos-code::-webkit-scrollbar-thumb {
            background-color: #38bdf8; /* Sky-500 */
            border-radius: 4px;
        }
        #tos-code::-webkit-scrollbar-track {
            background-color: #374151; /* Darker track */
        }
    </style>
</head>
<body>

    <div class="max-w-4xl mx-auto p-4 md:p-8">
        <!-- Header & Value Proposition -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white leading-tight">
                <span class="text-sky-400">Precision</span> Entry <span class="text-sky-400">Trigger</span>
            </h1>
            <p class="mt-4 text-xl text-gray-400 max-w-2xl mx-auto">
                Simple indicator pinpoints when the trend begins, and gives you crystal-clear clarity on when to enter.
            </p>
        </header>

        <!-- Video & Code Section -->
        <!-- Removed lg:grid-cols-2 to force stacking on all screen sizes -->
        <div class="grid grid-cols-1 gap-8">
            <!-- YouTube Video Embed -->
            <section class="bg-gray-800 rounded-xl shadow-2xl overflow-hidden p-0 border border-gray-700">
                <div class="aspect-w-16 aspect-h-9" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
                    <!-- Placeholder YouTube Embed. Replace 'dQw4w9WgXcQ' with your actual video ID -->
                    <iframe 
                        src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=0&rel=0" 
                        title="Embedded Trading Strategy Video" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen 
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 10px 10px 0 0;"
                        onerror="this.style.display='none'; document.getElementById('video-fallback').style.display='block';"
                    ></iframe>
                    <div id="video-fallback" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #1f2937; color: white; display: flex; align-items: center; justify-content: center; text-align: center;">
                        <p>Video loading failed or video is restricted. Please check the URL.<br> (Placeholder Video Used)</p>
                    </div>
                </div>
                <div class="p-6">
                    <h2 class="text-2xl font-bold text-white">Video Guide: Your First Precision Entry</h2>
                    <p class="mt-2 text-gray-400">Watch the video above to see how this indicator signals the start of a new trend and provides the perfect entry point.</p>
                </div>
            </section>

            <!-- Code Block & Copy Button -->
            <section class="bg-gray-800 rounded-xl shadow-2xl p-6 flex flex-col justify-between border border-gray-700">
                <div>
                    <h2 class="text-2xl font-bold text-white mb-4">Copy the ThinkOrSwim Code</h2>
                    <p class="text-gray-400 mb-4">This is the complete ThinkScript code for the indicator demonstrated in the video. Copy it now and paste it into your Thinkorswim (TOS) platform.</p>
                    
                    <!-- Code Textarea -->
                    <textarea 
                        id="tos-code"
                        readonly
                        class="w-full p-4 h-48 resize-none border-2 border-gray-700 rounded-lg bg-gray-900 text-sky-300 text-sm font-mono leading-relaxed overflow-auto focus:outline-none focus:ring-2 focus:ring-sky-500"
                    ># ThinkScript Indicator for Precision Entry
# This script identifies a high-probability trend initiation point.

# --- Parameters ---
def length = 21;
# Max ratio for upper wick (Bullish) or lower wick (Bearish) to total range
def MaxWickRatio = 1 / 6;

# --- EMA Calculation and Plotting ---
def ema = ExpAverage(close, length);
def isUp = ema > ema[1];
def colorCondition = if isUp then 1 else -1;

plot ColoredEMA = ema;
ColoredEMA.SetLineWeight(2);
ColoredEMA.DefineColor("Up", Color.GREEN);
ColoredEMA.DefineColor("Down", Color.RED);
ColoredEMA.AssignValueColor(if colorCondition > 0 then ColoredEMA.Color("Up") else ColoredEMA.Color("Down"));

# ------------------------------------------------------------------
#                           BULLISH (LONG) SIGNAL LOGIC
# ------------------------------------------------------------------

# 1. Higher Lows (HL) Condition for 4 consecutive bars
def higherLow = low > low[1];
def hlCount = CompoundValue(1, if higherLow then hlCount[1] + 1 else 0, 0);
def fourPlusHLs = hlCount >= 4;

# 2. Break Above 21 EMA Condition (Bar 0)
def closedAboveEMA_Bar0 = close[2] > ema[2];

# 3. The Red 'Breather' Bar (Bar 1) Specifics
def bar1_Breather_B = close[1] < open[1];        # Bar 1 is Red/Down
def bar1_HigherHigh_B = high[1] > high[2];       # Bar 1 High > Bar 0 High
def bar1_LowBelowEMA_B = low[1] < ema[1];        # Bar 1 Low below EMA (tests support)
def bar1_HighAboveEMA_B = high[1] > ema[1];      # Bar 1 High above EMA
def bar1_CloseAboveEMA_B = close[1] > ema[1];    # Bar 1 must close above the EMA

# Combined Breather Bar (Bar 1) Conditions
def breatherConditions_B = bar1_Breather_B AND
                           bar1_HigherHigh_B AND
                           bar1_LowBelowEMA_B AND
                           bar1_HighAboveEMA_B AND
                           bar1_CloseAboveEMA_B;

# 4. The Bullish Confirmation Bar (Bar 2 - Current Bar) Requirements
def bar2_Bullish = close > open;                 # Bar 2 is Green/Up
def bar2_CloseAboveHigh1 = close > high[1];      # Bar 2 must close above Bar 1's HIGH

# Bar 2 has a very small upper wick (High - Close < 1/6 of Total Range)
def bar2_TotalRange = high - low;
def bar2_UpperWick = high - close;
def bar2_AlmostSolid_B = if bar2_TotalRange > 0 then bar2_UpperWick < bar2_TotalRange * MaxWickRatio else 0;

# 5. The Complete Bullish Signal
def BullishSignal = fourPlusHLs[2] AND
                    closedAboveEMA_Bar0 AND
                    breatherConditions_B AND
                    bar2_Bullish AND
                    bar2_CloseAboveHigh1 AND
                    bar2_AlmostSolid_B;

# ------------------------------------------------------------------
#                           BEARISH (SHORT) SIGNAL LOGIC
# ------------------------------------------------------------------

# 1. Lower Highs (LH) Condition for 4 consecutive bars
def lowerHigh = high < high[1];
def lhCount = CompoundValue(1, if lowerHigh then lhCount[1] + 1 else 0, 0);
def fourPlusLHs = lhCount >= 4;

# 2. Break Below 21 EMA Condition (Bar 0)
def closedBelowEMA_Bar0 = close[2] < ema[2];

# 3. The Green 'Breather' Bar (Bar 1) Specifics
def bar1_Breather_S = close[1] > open[1];        # Bar 1 is Green/Up
def bar1_LowerLow_S = low[1] < low[2];           # Bar 1 Low < Bar 0 Low
def bar1_HighAboveEMA_S = high[1] > ema[1];      # Bar 1 High above EMA
def bar1_LowBelowEMA_S = low[1] < ema[1];        # Bar 1 Low below EMA (tests resistance)
def bar1_CloseBelowEMA_S = close[1] < ema[1];    # Bar 1 must close below the EMA

# Combined Breather Bar (Bar 1) Conditions
def breatherConditions_S = bar1_Breather_S AND
                           bar1_LowerLow_S AND
                           bar1_HighAboveEMA_S AND
                           bar1_LowBelowEMA_S AND
                           bar1_CloseBelowEMA_S;

# 4. The Bearish Confirmation Bar (Bar 2 - Current Bar) Requirements
def bar2_Bearish = close < open;                 # Bar 2 is Red/Down
def bar2_CloseBelowLow1 = close < low[1];        # Bar 2 must close below Bar 1's LOW

# Bar 2 has a very small lower wick (Close - Low < 1/6 of Total Range)
def bar2_LowerWick = close - low;
def bar2_AlmostSolid_S = if bar2_TotalRange > 0 then bar2_LowerWick < bar2_TotalRange * MaxWickRatio else 0;

# 5. The Complete Bearish Signal
def BearishSignal = fourPlusLHs[2] AND
                    closedBelowEMA_Bar0 AND
                    breatherConditions_S AND
                    bar2_Bearish AND
                    bar2_CloseBelowLow1 AND
                    bar2_AlmostSolid_S;

# ------------------------------------------------------------------
#                           PLOT BUBBLES
# ------------------------------------------------------------------

# Plot Bullish Signal Bubble (AT the High, anchored ABOVE)
# Anchor is YES (or true) to plot the bubble above the reference point (high).
AddChartBubble(BullishSignal, high, "Precision Entry", Color.GREEN, yes);

# Plot Bearish Signal Bubble (AT the Low, anchored BELOW)
# Anchor is NO (or false) to plot the bubble below the reference point (low).
AddChartBubble(BearishSignal, low, "Precision Entry", Color.RED, no);
                    </textarea>
                </div>

                <!-- Copy Button -->
                <button 
                    id="copy-button"
                    class="mt-6 w-full px-6 py-3 text-lg font-semibold text-gray-900 bg-sky-500 rounded-lg shadow-xl hover:bg-sky-400 transition duration-300 ease-in-out transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-sky-500 focus:ring-opacity-70"
                    onclick="copyCode()"
                >
                    <span id="button-text">Copy Indicator Code Now</span>
                </button>

                <!-- Copy Confirmation Message -->
                <div id="copy-message" class="hidden mt-3 text-center text-sm font-medium text-green-300 bg-green-900/50 p-2 rounded-lg border border-green-700">
                    Code copied to clipboard! Ready for Thinkorswim.
                </div>
            </section>
        </div>

        <!-- Instructions Section -->
        <section class="mt-12 bg-gray-800 p-8 rounded-xl shadow-xl border border-gray-700">
            <h2 class="text-3xl font-bold text-white mb-6 border-b border-gray-700 pb-2">Your 3-Step Setup Guide</h2>
            <ol class="space-y-6">
                <li class="flex items-start">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-sky-500 text-gray-900 font-bold rounded-full mr-4 text-lg shadow-md">1</div>
                    <div>
                        <h3 class="text-xl font-semibold text-white">Watch the Video</h3>
                        <p class="mt-1 text-gray-400">Understand how to install the indicator. Pay close attention to the examples of precise entries.</p>
                    </div>
                </li>
                <li class="flex items-start">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-sky-500 text-gray-900 font-bold rounded-full mr-4 text-lg shadow-md">2</div>
                    <div>
                        <h3 class="text-xl font-semibold text-white">Import the Code</h3>
                        <p class="mt-1 text-gray-400">In Thinkorswim, navigate to **'Studies' > 'Edit Studies'**. Click **'New'** (or **'Create'**), paste the code you just copied, give it a name like <code class="bg-gray-700 p-1 rounded font-mono text-sm text-sky-400">precisionentrytrigger</code>, and click **'OK'**.</p>
                    </div>
                </li>
                <li class="flex items-start">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-sky-500 text-gray-900 font-bold rounded-full mr-4 text-lg shadow-md">3</div>
                    <div>
                        <h3 class="text-xl font-semibold text-white">Apply and Practice</h3>
                        <p class="mt-1 text-gray-400">Add the newly created study to your chart. Use the signals to observe how the market moves, when a trend begins and when a signal fires. This is your first step towards consistent wins.</p>
                    </div>
                </li>
            </ol>
        </section>

        <!-- Mentorship Call-to-Action -->
        <section class="mt-12 text-center bg-gray-700 border-4 border-red-500/50 p-8 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-bold text-red-400">The Indicator Is The Tool. The Mentorship Is The System.</h2>
            <p class="mt-4 text-lg text-gray-300 max-w-3xl mx-auto">
                This powerful indicator will give you *precision*, but true, consistent trading success requires a complete **system** ... risk management, trade sizing, when to enter, when to exit, and consistent dependable wins every single day. 
                <br class="hidden md:inline">
                If you are serious about transforming your trading from sporadic wins to sustained profitability, our mentorship is the next step.
            </p>
            <a href="https://entryexitpro.com/mentorship" target="_blank"
                class="mt-6 inline-block px-12 py-4 text-xl font-extrabold text-white bg-red-600 rounded-full shadow-2xl hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-[1.05] focus:outline-none focus:ring-4 focus:ring-red-500 focus:ring-opacity-70"
            >
                Explore The Full Trading System
            </a>
        </section>

        <!-- Footer -->
        <footer class="mt-10 text-center text-sm text-gray-600 border-t border-gray-700 pt-6">
            &copy; 2025 EntryExitPro. All rights reserved. Trading involves risk.
        </footer>
    </div>

    <!-- JavaScript for Copy Functionality -->
    <script>
        /**
         * Copies the content of the TOS code block to the user's clipboard
         * and provides visual confirmation.
         */
        function copyCode() {
            const codeElement = document.getElementById('tos-code');
            const copyMessage = document.getElementById('copy-message');
            const buttonText = document.getElementById('button-text');
            
            // 1. Select the text
            codeElement.select();
            codeElement.setSelectionRange(0, 99999); // For mobile devices

            let success = false;
            try {
                // 2. Execute the copy command
                success = document.execCommand('copy');
            } catch (err) {
                console.error('Copy command failed:', err);
            }

            if (success) {
                // 3. Show confirmation message
                buttonText.textContent = 'Code Copied! (Click to Copy Again)';
                copyMessage.classList.remove('hidden');
                
                // Hide confirmation after 3 seconds
                setTimeout(() => {
                    copyMessage.classList.add('hidden');
                    buttonText.textContent = 'Copy Indicator Code Now';
                }, 3000);
            } else {
                // Fallback for failed copy
                buttonText.textContent = 'Copy Failed. Please Select and Copy Manually.';
            }
        }
    </script>
</body>
</html>